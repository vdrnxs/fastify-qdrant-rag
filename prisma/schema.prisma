// Prisma schema for file tracking system

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
}

// Tabla principal de archivos monitorizados
model File {
  id            String   @id @default(cuid())
  filePath      String   @unique
  fileName      String
  fileExtension String
  fileSize      Int

  contentHash   String

  status        FileStatus @default(PENDING)
  lastModified  DateTime
  lastScanned   DateTime @default(now())

  processingAttempts Int @default(0)
  lastError     String?

  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([status])
  @@index([contentHash])
}

enum FileStatus {
  PENDING
  PROCESSING
  COMPLETED
  ERROR
  MODIFIED
  DELETED
}
